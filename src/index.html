<html>
<head>
<script src="tasklinks.js" type="text/javascript"></script>
<script type="text/javascript">
/*
function load() {
        gapi.client.setApiKey('AIzaSyDp0wuNcXNZJ6tdvVSTi9W7YH08iQWh2P0');
		var config = {
		  'client_id': '1012478554848.apps.googleusercontent.com',
		  'scope': 'https://www.googleapis.com/auth/tasks'
		};
		
		gapi.auth.init(gapi.auth.authorize(config, function() {
		  console.log('Gapi authorize complete.');
		  console.log('Gapi token = '+gapi.auth.getToken());
		}));
		
		
		
		//var tl=new tasklink();//create a new tasklink object
		
        //gapi.client.load('tasks', 'v1', tl.loaded());//load the tasks api, v1, and call tasklink Object loaded method
      }
*/

var apiKey="AIzaSyDp0wuNcXNZJ6tdvVSTi9W7YH08iQWh2P0";
var clientID="1012478554848.apps.googleusercontent.com";
var scopes="https://www.googleapis.com/auth/tasks";

function handleClientLoad() {
  gapi.client.setApiKey(apiKey);
  window.setTimeout(checkAuth,1);
}

function checkAuth() {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
}

function handleAuthResult(authResult) {
  var authorizeButton = document.getElementById('authorize-button');
  if (authResult && !authResult.error) {
    authorizeButton.style.visibility = 'hidden';
    makeApiCall();
  } else {
    authorizeButton.style.visibility = '';
    authorizeButton.onclick = handleAuthClick;
  }
}

function handleAuthClick(event) {
  gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
  return false;
}
</script>
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script>

</head>
<body>
<button id="authorize-button">ClickME</button>
</body>
</html>